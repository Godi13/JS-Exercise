<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Document</title>
</head>
<body>
  <ul id="list">
    <li>
      <input type="button" value="-" />
      <strong>0</strong>
      <input type="button" value="+" />
      单价：<em>12.5元</em>
      总计：<span>0元</span>
    </li>
    <li>
      <input type="button" value="-" />
      <strong>0</strong>
      <input type="button" value="+" />
      单价：<em>8.5元</em>
      总计：<span>0元</span>
    </li>
    <li>
      <input type="button" value="-" />
      <strong>0</strong>
      <input type="button" value="+" />
      单价：<em>15.5元</em>
      总计：<span>0元</span>
    </li>
    <li>
      <input type="button" value="-" />
      <strong>0</strong>
      <input type="button" value="+" />
      单价：<em>10元</em>
      总计：<span>0元</span>
    </li>
    <li>
      <input type="button" value="-" />
      <strong>0</strong>
      <input type="button" value="+" />
      单价：<em>7.5元</em>
      总计：<span>0元</span>
    </li>
  </ul>

  <p>
    商品合计共：<em>0件</em>，共花费了：<em>0元</em><br />
    其中最贵的商品单价是：<em>0元</em>
  </p>


  <script>
  window.onload = function () {
    var oList = document.getElementById('list');
    var aLi = oList.getElementsByTagName('li');
    var oP = document.getElementsByTagName('p')[0];
    var aEm = oP.getElementsByTagName('em');
    var sum = 0;
    var total = 0;
    var high = 0;

    for (var i = 0; i < aLi.length; i++) {
      fn(aLi[i]);
    }

    function fn(li) {
      var sub = li.getElementsByTagName('input')[0];
      var add = li.getElementsByTagName('input')[1];
      var oStr = li.getElementsByTagName('strong')[0];
      var oEm = li.getElementsByTagName('em')[0];
      var oSpan = li.getElementsByTagName('span')[0];
      var num = oStr.innerHTML;
      var price = parseFloat(oEm.innerHTML);

      sub.onclick = function () {
        if (num > 0) {
          num--;
          sum --;
          total -= price;
        }
        if (num == 0) {
          high = 0;
        }
        oStr.innerHTML = num;
        oSpan.innerHTML = num * price;
        fn2();
        aEm[0].innerHTML = sum + '件';
        aEm[1].innerHTML = total + '元';
        aEm[2].innerHTML = high + '元';
      }

      add.onclick = function () {
        num ++;
        sum ++;
        total += price;
        if (price > high) {
          high = price;
        }
        oStr.innerHTML = num;
        oSpan.innerHTML = num * price + '元';
        aEm[0].innerHTML = sum + '件';
        aEm[1].innerHTML = total + '元';
        aEm[2].innerHTML = high + '元';
      }

    }

    function fn2() {
      for (var i = 0; i < aLi.length; i++) {
        if(aLi[i].getElementsByTagName('strong')[0].innerHTML > 0) {
          if(parseInt(aLi[i].getElementsByTagName('em')[0].innerHTML) > high) {
            high = parseFloat(aLi[i].getElementsByTagName('em')[0].innerHTML);
          }
        }
      }
    }

  }

  </script>
</body>
</html>
